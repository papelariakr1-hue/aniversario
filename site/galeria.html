<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Galeria Polaroid</title>
<style>
  /* Fundo vis칤vel */
  #fundo {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #a8d5ff; /* Cor do fundo */
    z-index: 0; /* Atr치s das fotos */
  }

  body {
    margin: 0;
    padding: 40px 20px;
    font-family: 'Arial', sans-serif;
    overflow: hidden;
    position: relative;
    height: 100vh;
  }

  #baguncar {
    position: fixed;
    top: 10px;
    right: 10px;
    z-index: 2000;
    padding: 10px 15px;
    background: #3498db;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    transition: background 0.3s;
  }
  #baguncar:hover { background: #2980b9; }

  #galeria {
    position: relative;
    width: 100%;
    height: 100%;
    z-index: 1; /* Acima do fundo */
  }

  .polaroid {
    background: white;
    padding: 10px 10px 20px 10px;
    width: 120px;
    cursor: pointer;
    text-align: center;
    position: absolute;
    opacity: 0;
    transform: translateY(-200px) rotate(0deg);
    transition: transform 0.3s, box-shadow 0.3s;
    box-shadow: 0 8px 16px rgba(0,0,0,0.3);
  }

  .polaroid img {
    width: 100%;
    display: block;
    border-radius: 8px;
  }

  .polaroid:hover {
    animation: tremer 0.3s infinite alternate;
    transform: scale(1.1) rotate(0deg);
    z-index: 100;
    box-shadow: 0 12px 24px rgba(0,0,0,0.4),
                4px 4px 15px rgba(0,0,0,0.2) inset;
  }

  @keyframes tremer {
    0% { transform: scale(1.1) rotate(-2deg); }
    50% { transform: scale(1.1) rotate(2deg); }
    100% { transform: scale(1.1) rotate(-2deg); }
  }

  @keyframes cair {
    0% {
      transform: translateY(-200px) rotate(var(--rotacao-inicial));
      opacity: 0;
    }
    100% {
      transform: translateY(0px) rotate(var(--rotacao-final));
      opacity: 1;
    }
  }

  #overlay {
    position: fixed;
    top:0;
    left:0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.8);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }

  #overlay img {
    max-width: 90%;
    max-height: 90%;
    border-radius: 10px;
  }

  @media(max-width: 600px) { .polaroid { width: 90px; } }

  /* Bot칚o de teste PC */
  #playAudioPC {
    position: fixed;
    bottom: 10px;
    right: 10px;
    z-index: 3000;
    padding: 10px 15px;
    background: #e74c3c;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  }
</style>
</head>
<body>

<div id="fundo"></div> <!-- Fundo vis칤vel -->
<button id="baguncar">Bagun칞ar Fotos</button>
<div id="galeria"></div>
<div id="overlay"><img id="imagemGrande" src=""></div>

<!-- M칰sica autom치tica -->
<audio id="audio" loop>
  <source src="audio/musica.mp3" type="audio/mpeg">
  Seu navegador n칚o suporta 치udio.
</audio>

<!-- Bot칚o de teste para PC -->
<button id="playAudioPC">游꿧 Tocar M칰sica (PC)</button>

<script>
  const corpo = document.getElementById('galeria');
  let larguraBody = window.innerWidth;
  let alturaBody = window.innerHeight;

  function posicaoAleatoria(fotoWidth, fotoHeight) {
    const margem = 20;
    const extra = 40;
    const posX = Math.random() * (larguraBody - fotoWidth - margem) + margem - extra/2;
    const posY = Math.random() * (alturaBody - fotoHeight - margem) + margem - extra/2;
    return {x: posX, y: posY};
  }

  function criarFotos() {
    for(let i=1; i<=16; i++){
      const div = document.createElement('div');
      div.className = 'polaroid';

      const rotIni = (Math.random()*30 -15).toFixed(2) + 'deg';
      const rotFin = (Math.random()*20 -10).toFixed(2) + 'deg';
      div.style.setProperty('--rotacao-inicial', rotIni);
      div.style.setProperty('--rotacao-final', rotFin);

      const {x, y} = posicaoAleatoria(120, 150);
      div.style.left = x + 'px';
      div.style.top = y + 'px';

      div.style.animation = `cair 0.8s forwards`;
      div.style.animationDelay = (i*0.1)+'s';

      const img = document.createElement('img');
      img.src = `imagens/foto${i}.jpg`;
      img.alt = `Foto ${i}`;
      div.appendChild(img);

      corpo.appendChild(div);
    }
  }

  criarFotos();

  const overlay = document.getElementById('overlay');

  document.querySelectorAll('.polaroid').forEach(foto=>{
    foto.onclick = () => {
      document.getElementById('imagemGrande').src = foto.querySelector('img').src;
      overlay.style.display = 'flex';
    }
  });

  overlay.onclick = () => { overlay.style.display = 'none'; }

  function baguncarFotos() {
    document.querySelectorAll('.polaroid').forEach(foto => {
      const {x, y} = posicaoAleatoria(foto.offsetWidth, foto.offsetHeight);
      foto.style.left = x + 'px';
      foto.style.top = y + 'px';
      const rotFin = (Math.random()*20 -10).toFixed(2) + 'deg';
      foto.style.setProperty('--rotacao-final', rotFin);
    });
  }

  document.getElementById('baguncar').onclick = baguncarFotos;

  window.addEventListener('resize', ()=>{
    larguraBody = window.innerWidth;
    alturaBody = window.innerHeight;
    baguncarFotos();
  });

  // M칰sica autom치tica
  const audio = document.getElementById("audio");

  // Se veio do bot칚o da tela inicial
  if(sessionStorage.getItem("playMusic") === "true") {
    audio.play();
    sessionStorage.removeItem("playMusic");
  }

  // Bot칚o de teste PC
  const playPC = document.getElementById("playAudioPC");
  playPC.addEventListener("click", () => {
    audio.play();
    playPC.style.display = "none"; // esconde depois de tocar
  });

</script>

</body>
</html>
